# 7.17 Sins of a Solar Empire P7

## 实验任务

正如你所知道sins是一个贪玩的不得了的小P孩（如果你非常讨厌他可以直接跳到第二段），你也知道他最近很喜欢玩一个叫做太阳帝国的原罪的策略游戏我向你保证这是太阳帝国原罪系列的第七章了。现在sins拥护N个星球，每个星球m种不同的资源，每个资源都拥有一个编号A，对于sins来说N个星球都有的资源才是最宝贵的，他想知道这样的资源有哪些？

## 数据输入

第1行是正整数N（1<=N<=1000）。
第2~N+1行各有一个正整数m和m个正整数编号A(有重复)，（0 < m <= 1000, 0 <= A <= 10^9）.

## 数据输出

第一行一个整数S，表示N个星球都拥有的资源个数。
如果S不等于0输出第二行，按照升序输出S个整数表示资源编号(无重复)，资源编号之间有空格，结尾没有空格。

## 输入示例

```cpp
4
2 2 4
2 2 4
3 2 2 4
4 2 3 4 5
```

## 输出示例

```cpp
2
2 4
```

## 代码

```cpp
#include <bits/stdc++.h>
using namespace std;
using ll = long long;

int main() {
    ios::sync_with_stdio(0);
    cin.tie(0);

    int N;
    if (!(cin >> N)) return 0;

    int m;
    unordered_set<ll> base, cur;
    vector<ll> keep;

    cin >> m;
    for (int i = 0; i < m; i++) {
        ll x; cin >> x;
        base.insert(x);
    }

    for (int t = 1; t < N; t++) {
        cin >> m;
        cur.clear();
        for (int i = 0; i < m; i++) {
            ll x; cin >> x;
            cur.insert(x);
        }
        keep.clear();
        keep.reserve(base.size());
        for (auto &x : base) if (cur.count(x)) keep.push_back(x);
        base.clear();
        for (auto &x : keep) base.insert(x);
    }

    vector<ll> ans(base.begin(), base.end());
    sort(ans.begin(), ans.end());
    cout << ans.size() << '\n';
    if (!ans.empty()) {
        for (size_t i = 0; i < ans.size(); i++) {
            if (i) cout << ' ';
            cout << ans[i];
        }
        cout << '\n';
    }
    return 0;
}
```

[返回目录](../README.md)
